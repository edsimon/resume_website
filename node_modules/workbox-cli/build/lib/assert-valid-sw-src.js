"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

/*
  Copyright 2018 Google LLC

  Use of this source code is governed by an MIT-style
  license that can be found in the LICENSE file or at
  https://opensource.org/licenses/MIT.
*/
const assert = require('assert');

const fse = require('fs-extra');

const errors = require('./errors');

const INJECTION_POINT_REGEXP = /\.precacheAndRoute\(\s*\[\s*\]\s*\)/;

module.exports =
/*#__PURE__*/
function () {
  var _ref = (0, _asyncToGenerator2.default)(function* (swSrc) {
    const swContents = yield fse.readFile(swSrc, 'utf-8');
    assert(swContents.match(INJECTION_POINT_REGEXP), errors['sw-src-missing-injection-point']);
  });

  return function (_x) {
    return _ref.apply(this, arguments);
  };
}();