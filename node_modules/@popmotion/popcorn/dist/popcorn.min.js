!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((n=n||self).popcorn={})}(this,function(n){"use strict";function a(n){return"number"==typeof n}function t(n){return 180*n/Math.PI}function r(e){return function(r,t,n){return void 0!==n?e(r,t,n):function(n){return e(r,t,n)}}}function e(n){return n*Math.PI/180}function o(n){return n.hasOwnProperty("x")&&n.hasOwnProperty("y")}function i(n){return o(n)&&n.hasOwnProperty("z")}function f(n,r){return Math.abs(n-r)}function c(n,r,t){return-t*n+t*r+n}function u(r,t){return function(n){return Math.max(Math.min(n,t),r)}}function s(n){return n%1?Number(n.toFixed(5)):n}function p(n){return void 0!==n.red}function h(n){return void 0!==n.hue}function d(u){return function(n){if("string"!=typeof n)return n;for(var r={},t=function(n){return n.substring(n.indexOf("(")+1,n.lastIndexOf(")"))}(n).split(/,\s*/),e=0;e<4;e++)r[u[e]]=void 0!==t[e]?parseFloat(t[e]):1;return r}}var l,m={x:0,y:0,z:0},v=r(function(n,r,t){return Math.min(Math.max(t,n),r)}),y=function(n,r,t){var e=r-n;return 0==e?1:(t-n)/e},g=function(){return(g=Object.assign||function(n){for(var r,t=1,e=arguments.length;t<e;t++)for(var u in r=arguments[t])Object.prototype.hasOwnProperty.call(r,u)&&(n[u]=r[u]);return n}).apply(this,arguments)},b=function(){return(b=Object.assign||function(n){for(var r,t=1,e=arguments.length;t<e;t++)for(var u in r=arguments[t])Object.prototype.hasOwnProperty.call(r,u)&&(n[u]=r[u]);return n}).apply(this,arguments)},M=/(-)?(\d[\d\.]*)/g,x=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,w=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))$/i,O={test:function(n){return"number"==typeof n},parse:parseFloat,transform:function(n){return n}},A=(b({},O,{transform:u(0,1)}),b({},O,{default:1}),l="%",{test:function(n){return"string"==typeof n&&n.endsWith(l)&&1===n.split(" ").length},parse:parseFloat,transform:function(n){return""+n+l}}),F=(b({},A,{parse:function(n){return A.parse(n)/100},transform:function(n){return A.transform(100*n)}}),u(0,255)),I=b({},O,{transform:function(n){return Math.round(F(n))}});function P(n,r){return n.startsWith(r)&&w.test(n)}function R(n){return"number"==typeof n?0:n}var S={test:function(n){return"string"==typeof n?P(n,"rgb"):p(n)},parse:d(["red","green","blue","alpha"]),transform:function(n){var r=n.red,t=n.green,e=n.blue,u=n.alpha;return function(n){var r=n.red,t=n.green,e=n.blue,u=n.alpha;return"rgba("+r+", "+t+", "+e+", "+(void 0===u?1:u)+")"}({red:I.transform(r),green:I.transform(t),blue:I.transform(e),alpha:s(u)})}},N={test:function(n){return"string"==typeof n?P(n,"hsl"):h(n)},parse:d(["hue","saturation","lightness","alpha"]),transform:function(n){var r=n.hue,t=n.saturation,e=n.lightness,u=n.alpha;return function(n){var r=n.hue,t=n.saturation,e=n.lightness,u=n.alpha;return"hsla("+r+", "+t+", "+e+", "+(void 0===u?1:u)+")"}({hue:Math.round(r),saturation:A.transform(s(t)),lightness:A.transform(s(e)),alpha:s(u)})}},j=b({},S,{test:function(n){return"string"==typeof n&&P(n,"#")},parse:function(n){var r="",t="",e="";return 4<n.length?(r=n.substr(1,2),t=n.substr(3,2),e=n.substr(5,2)):(r=n.substr(1,1),t=n.substr(2,1),e=n.substr(3,1),r+=r,t+=t,e+=e),{red:parseInt(r,16),green:parseInt(t,16),blue:parseInt(e,16),alpha:1}}}),B={test:function(n){return"string"==typeof n&&w.test(n)||p(n)||h(n)},parse:function(n){return S.test(n)?S.parse(n):N.test(n)?N.parse(n):j.test(n)?j.parse(n):n},transform:function(n){return p(n)?S.transform(n):h(n)?N.transform(n):n}},E="${c}",k="${n}",q={test:function(n){if("string"!=typeof n||!isNaN(n))return!1;var r=0,t=n.match(M),e=n.match(x);return t&&(r+=t.length),e&&(r+=e.length),0<r},parse:function(n){var r=n,t=[],e=r.match(x);e&&(r=r.replace(x,E),t.push.apply(t,e.map(B.parse)));var u=r.match(M);return u&&t.push.apply(t,u.map(O.parse)),t},createTransformer:function(n){var e=n,u=0,r=n.match(x),a=r?r.length:0;if(r)for(var t=0;t<a;t++)e=e.replace(r[t],E),u++;var o=e.match(M),i=o?o.length:0;if(o)for(t=0;t<i;t++)e=e.replace(o[t],k),u++;return function(n){for(var r=e,t=0;t<u;t++)r=r.replace(t<a?E:k,t<a?B.transform(n[t]):s(n[t]));return r}},getAnimatableNone:function(n){var r=q.parse(n);return q.createTransformer(n)(r.map(R))}},T=function(){};"production"!==process.env.NODE_ENV&&(T=function(n,r){if(!n)throw new Error(r)});function z(n,r,t){var e=n*n,u=r*r;return Math.sqrt(Math.max(0,t*(u-e)+e))}function D(r){return G.find(function(n){return n.test(r)})}function L(n){return"'"+n+"' is not an animatable color. Use the equivalent color code instead."}function U(r,t){return function(n){return t(r(n))}}var G=[j,S,N],H=function(n,r){var t=D(n),e=D(r);T(!!t,L(n)),T(!!e,L(r)),T(t.transform===e.transform,"Both colors must be hex/RGBA, OR both must be HSLA.");var u=t.parse(n),a=e.parse(r),o=g({},u),i=t===N?c:z;return function(n){for(var r in o)"alpha"!==r&&(o[r]=i(u[r],a[r],n));return o.alpha=c(u.alpha,a.alpha,n),t.transform(o)}},W=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.reduce(U)};function C(r,t){return a(r)?function(n){return c(r,t,n)}:B.test(r)?H(r,t):J(r,t)}var $=function(n,t){var e=n.slice(),u=e.length,a=n.map(function(n,r){return C(n,t[r])});return function(n){for(var r=0;r<u;r++)e[r]=a[r](n);return e}},_=function(n,r){var t=g({},n,r),e={};for(var u in t)void 0!==n[u]&&void 0!==r[u]&&(e[u]=C(n[u],r[u]));return function(n){for(var r in e)t[r]=e[r](n);return t}};function V(n){for(var r=q.parse(n),t=r.length,e=0,u=0,a=0,o=0;o<t;o++)e||"number"==typeof r[o]?e++:void 0!==r[o].hue?a++:u++;return{parsed:r,numNumbers:e,numRGB:u,numHSL:a}}var J=function(n,r){var t=q.createTransformer(r),e=V(n),u=V(r);return T(e.numHSL===u.numHSL&&e.numRGB===u.numRGB&&e.numNumbers>=u.numNumbers,"Complex values '"+n+"' and '"+r+"' too different to mix. Ensure all colors are of the same type."),W($(e.parsed,u.parsed),t)},K=function(r,t){return function(n){return c(r,t,n)}};function Q(n,r,t){for(var e=[],u=t||function(n){return"number"==typeof n?K:"string"==typeof n?B.test(n)?H:J:Array.isArray(n)?$:"object"==typeof n?_:void 0}(n[0]),a=n.length-1,o=0;o<a;o++){var i=u(n[o],n[o+1]);if(r){var f=Array.isArray(r)?r[o]:r;i=W(f,i)}e.push(i)}return e}function X(n,r){return void 0===r&&(r=2),r=Math.pow(10,r),Math.round(n*r)/r}function Y(n,r,t,e){return void 0===e&&(e=0),X(n+t*(r-n)/Math.max(e,t))}var Z,nn,rn=0,tn="undefined"!=typeof window&&void 0!==window.requestAnimationFrame?function(n){return window.requestAnimationFrame(n)}:function(n){var r=Date.now(),t=Math.max(0,16.7-(r-rn));rn=r+t,setTimeout(function(){return n(rn)},t)};(nn=Z=Z||{}).Read="read",nn.Update="update",nn.Render="render",nn.PostRender="postRender",nn.FixedUpdate="fixedUpdate";function en(n){return xn=n}function un(n){return In[n].process(On)}function an(n){return n}function on(a){return void 0===a&&(a=an),r(function(n,r,t){var e=r-t,u=-(0-n+1)*(0-a(Math.abs(e)));return e<=0?r+u:r-u})}function fn(r){return function(n){return 1-r(1-n)}}function cn(r){return function(n){return n<=.5?r(2*n)/2:(2-r(2*(1-n)))/2}}function sn(r){return function(n){return Math.pow(n,r)}}function pn(r){return function(n){return n*n*((r+1)*n-r)}}function hn(n){var r=pn(n);return function(n){return(n*=2)<1?.5*r(n):.5*(2-Math.pow(2,-10*(n-1)))}}function dn(n){return 1-Math.sin(Math.acos(n))}function ln(n,r){return 1-3*r+3*n}function mn(n,r){return 3*r-6*n}function vn(n){return 3*n}function yn(n,r,t){return 3*ln(r,t)*n*n+2*mn(r,t)*n+vn(r)}function gn(n,r,t){return((ln(r,t)*n+mn(r,t))*n+vn(r))*n}var bn=1/60*1e3,Mn=!0,xn=!1,wn=!1,On={delta:0,timestamp:0},An=[Z.Read,Z.Update,Z.Render,Z.PostRender],Fn=An.reduce(function(n,r){var e=function(e){var a=[],o=[],i=0,f=!1,u=0,c=new WeakSet,s=new WeakSet,p={cancel:function(n){var r=o.indexOf(n);c.add(n),-1!==r&&o.splice(r,1)},process:function(n){var r,t;if(f=!0,a=(r=[o,a])[0],(o=r[1]).length=0,i=a.length)for(u=0;u<i;u++)(t=a[u])(n),!0!==s.has(t)||c.has(t)||(p.schedule(t),e(!0));f=!1},schedule:function(n,r,t){void 0===r&&(r=!1),void 0===t&&(t=!1),T("function"==typeof n,"Argument must be a function");var e=t&&f,u=e?a:o;c.delete(n),r&&s.add(n),-1===u.indexOf(n)&&(u.push(n),e&&(i=a.length))}};return p}(en);return n.sync[r]=function(n,r,t){return void 0===r&&(r=!1),void 0===t&&(t=!1),xn||Rn(),e.schedule(n,r,t),n},n.cancelSync[r]=function(n){return e.cancel(n)},n.steps[r]=e,n},{steps:{},sync:{},cancelSync:{}}),In=Fn.steps,Pn=(Fn.sync,Fn.cancelSync,function(n){xn=!1,On.delta=Mn?bn:Math.max(Math.min(n-On.timestamp,40),1),Mn||(bn=On.delta),On.timestamp=n,wn=!0,An.forEach(un),wn=!1,xn&&(Mn=!1,tn(Pn))}),Rn=function(){Mn=xn=!0,wn||tn(Pn)},Sn=on(),Nn=on(Math.sqrt),jn=r(function(n,r,t){var e=r-n;return((t-n)%e+e)%e+n}),Bn=v(0,1),En=sn(2),kn=fn(En),qn=cn(En),Tn=fn(dn),zn=cn(Tn),Dn=pn(1.525),Ln=fn(Dn),Un=cn(Dn),Gn=hn(1.525),Hn="undefined"!=typeof Float32Array;n.angle=function(n,r){return void 0===r&&(r=m),t(Math.atan2(r.y-n.y,r.x-n.x))},n.anticipate=Gn,n.applyOffset=function(r,t){var e=!0;return void 0===t&&(t=r,e=!1),function(n){return e?n-r+t:(r=n,e=!0,t)}},n.backIn=Dn,n.backInOut=Un,n.backOut=Ln,n.circIn=dn,n.circInOut=zn,n.circOut=Tn,n.clamp=v,n.conditional=function(r,t){return function(n){return r(n)?t(n):n}},n.createAnticipateEasing=hn,n.createBackIn=pn,n.createExpoIn=sn,n.cubicBezier=function(o,r,i,t){function e(n){for(var r,t,e,u=0,a=1;10!==a&&f[a]<=n;++a)u+=.1;return r=(n-f[--a])/(f[a+1]-f[a]),.001<=(e=yn(t=u+.1*r,o,i))?function(n,r){for(var t=0,e=0;t<8;++t){if(0===(e=yn(r,o,i)))return r;r-=(gn(r,o,i)-n)/e}return r}(n,t):0===e?t:function(n,r,t){for(var e,u,a=0;0<(e=gn(u=r+(t-r)/2,o,i)-n)?t=u:r=u,1e-7<Math.abs(e)&&++a<10;);return u}(n,u,u+.1)}var f=Hn?new Float32Array(11):new Array(11);return function(){for(var n=0;n<11;++n)f[n]=gn(.1*n,o,i)}(),function(n){return o===r&&i===t?n:0===n?0:1===n?1:gn(e(n),r,t)}},n.degreesToRadians=e,n.distance=function(n,r){if(void 0===r&&(r=m),a(n)&&a(r))return f(n,r);if(o(n)&&o(r)){var t=f(n.x,r.x),e=f(n.y,r.y),u=i(n)&&i(r)?f(n.z,r.z):0;return Math.sqrt(Math.pow(t,2)+Math.pow(e,2)+Math.pow(u,2))}return 0},n.easeIn=En,n.easeInOut=qn,n.easeOut=kn,n.interpolate=function(n,r,t){var e=void 0===t?{}:t,u=e.clamp,a=void 0===u||u,o=e.ease,i=e.mixer,f=n.length;T(f===r.length,"Both input and output ranges must be the same length"),T(!o||!Array.isArray(o)||o.length===f-1,"Array of easing functions must be of length `input.length - 1`, as it applies to the transitions **between** the defined values."),n[0]>n[f-1]&&(n=[].concat(n),r=[].concat(r),n.reverse(),r.reverse());var c=Q(r,o,i),s=2===f?function(n,r){var t=n[0],e=n[1],u=r[0];return function(n){return u(y(t,e,n))}}(n,c):function(a,o){var i=a.length,f=i-1;return function(n){var r=0,t=!1;if(n<=a[0]?t=!0:n>=a[f]&&(r=f-1,t=!0),!t){for(var e=1;e<i&&!(a[e]>n||e===f);e++);r=e-1}var u=y(a[r],a[r+1],n);return o[r](u)}}(n,c);return a?W(v(n[0],n[f-1]),s):s},n.isPoint=o,n.isPoint3D=i,n.linear=function(n){return n},n.mirrored=cn,n.mix=c,n.mixArray=$,n.mixColor=H,n.mixComplex=J,n.mixObject=_,n.pipe=W,n.pointFromVector=function(n,r,t){return r=e(r),{x:t*Math.cos(r)+n.x,y:t*Math.sin(r)+n.y}},n.progress=y,n.radiansToDegrees=t,n.reversed=fn,n.smooth=function(u){void 0===u&&(u=50);var a=0,o=0;return function(n){var r=On.timestamp,t=r!==o?r-o:0,e=t?Y(a,n,t,u):a;return o=r,a=e}},n.smoothFrame=Y,n.snap=function(u){if("number"==typeof u)return function(n){return Math.round(n/u)*u};var a=0,o=u.length;return function(n){var r=Math.abs(u[0]-n);for(a=1;a<o;a++){var t=u[a],e=Math.abs(t-n);if(0===e)return t;if(r<e)return u[a-1];if(a===o-1)return t;r=e}}},n.springForce=on,n.springForceExpo=Nn,n.springForceLinear=Sn,n.steps=function(e,u){return void 0===u&&(u="end"),function(n){var r=(n="end"===u?Math.min(n,.999):Math.max(n,.001))*e,t="end"===u?Math.floor(r):Math.ceil(r);return Bn(t/e)}},n.toDecimal=X,n.velocityPerFrame=function(n,r){return a(n)?n/(1e3/r):0},n.velocityPerSecond=function(n,r){return r?n*(1e3/r):0},n.wrap=jn,Object.defineProperty(n,"__esModule",{value:!0})});
